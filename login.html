<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - AGRIHELPER</title>
<link rel="stylesheet" href="auth.css">
<script src="https://unpkg.com/lucide@latest"></script>
</head>

<body>

<a href="index.html" class="floating-back">
    <i data-lucide="arrow-left"></i>
</a>

<nav class="navbar">
    <a href="index.html" class="logo">
        <i data-lucide="leaf"></i> AGRIHELPER
    </a>
</nav>

<div class="auth-container">
    <div class="auth-card">
        <h2>Sign In</h2>

        <form id="loginForm">
            <input type="email" id="email" placeholder="Email Address" required>
            <input type="password" id="password" placeholder="Password" required>
            <button type="submit">Login</button>
        </form>

        <div class="auth-links">
            <a href="forgot.html">Forgot Password?</a>
            <p>Don't have an account? <a href="register.html">Sign Up</a></p>
        </div>
    </div>
</div>

<script>
lucide.createIcons();

document.getElementById("loginForm").addEventListener("submit", function(e) {
    e.preventDefault();

    let email = document.getElementById("email").value;
    let password = document.getElementById("password").value;

    if(email !== "" && password !== "") {
        // Save user name (temporary example name from email)
        let username = email.split("@")[0];

        localStorage.setItem("isLoggedIn", "true");
        localStorage.setItem("username", username);

        // Show success message
        alert("Login successful! Welcome, " + username);
        
        window.location.replace("index.html");
    } else {
        alert("Please enter email and password");
    }
});

// Check if already logged in
const isLoggedIn = localStorage.getItem("isLoggedIn");
if (isLoggedIn === "true") {
    window.location.replace("index.html");
}
</script>

</body>
</html>
